[workspace]
members = [
    "./crates/*",
]
resolver = "2"

[workspace.package]
version = "0.1.0"
authors = ["Heliozoa <daniel.x.martinez@helsinki.fi>"]
edition = "2021"
rust-version = "1.56"
repository = "https://github.com/Heliozoa/lbr"
license = "AGPL-3.0-or-later"

[workspace.dependencies]
jadata = { path = "./crates/jadata" }
lbr = { path = "./crates/lbr" }
lbr_api = { path = "./crates/api" }
lbr_core = { path = "./crates/core" }
lbr_web = { path = "./crates/web" }
lbr_server = { path = "./crates/backend" }
lbr_frontend = { path = "./crates/frontend" }

[profile.dev.package]
serde-xml-rs.opt-level = 3
serde.opt-level = 3
serde_json.opt-level = 3

# [patch.crates-io]
# ichiran = { path = "../ichiran" }

[profile.wasm-release]
inherits = "release"
opt-level = 'z'
lto = true
codegen-units = 1

[[workspace.metadata.leptos]]
name = "lbr"
bin-package = "lbr_server"
bin-target = "lbr_server"
lib-package = "lbr_frontend"
lib-profile-release = "wasm-release"
style-file = "style/bulma.css"
